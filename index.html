
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CBE 3300B: Direct Methanol Fuel Cell (DMFC)</title>
  <style>
    /* Reset & base */
    body {
      margin: 0;
      padding: 0;
      display: flex;
      background: #f0f4f8;           /* very light background for contrast */
      font-family: Georgia, serif;
      color: #001f3f;               /* dark navy text */
    }

    /* Fixed left‐hand navigation pane */
    nav.toc {
      position: fixed;
      top: 0;
      left: 0;
      width: 200px;
      height: 100vh;
      background: #001f3f;           /* navy background */
      padding: 1em;
      box-shadow: 2px 0 4px rgba(0,0,0,0.1);
      overflow-y: auto;
    }
    nav.toc ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    nav.toc li {
      margin: 0.5em 0;
    }
    nav.toc a {
      display: block;
      padding: 0.5em 1em;
      color: #ffffff;                /* white links */
      text-decoration: none;
      font-weight: 600;
      border-radius: 4px;
      transition: background 0.2s, color 0.2s;
    }
    nav.toc a:hover {
      background: #003366;           /* darker navy on hover */
      color: #ffffff;
    }

    /* Main content area */
    main {
      flex: 1;
      margin-left: 200px;            /* make room for nav */
      display: flex;
      justify-content: center;
      padding: 2em;
    }
    .container {
      width: 80%;
      max-width: 900px;
      background: #ffffff;           /* white background */
      padding: 2em;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    /* Typography */
    h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 0.5em;
      color: #001f3f;
    }
    h2 {
      font-size: 1.75em;
      margin-top: 1.5em;
      border-bottom: 2px solid #ccc;
      padding-bottom: 0.2em;
      color: #001f3f;
    }
    h3 {
      font-size: 1.4em;
      margin-top: 1em;
      color: #001f3f;
    }
    p, ul, ol {
      margin-bottom: 1em;
      line-height: 1.6;
      color: #001f3f;
    }
    ul, ol {
      padding-left: 1.5em;
    }
    a {
      color: #001f3f;                /* navy links in body */
    }
    a:hover {
      text-decoration: underline;
    }
    .equation {
      display: block;
      text-align: center;
      font-family: 'Courier New', monospace;
      background: #e8eef4;           /* very light blue background */
      padding: 0.5em;
      margin: 1em 0;
      border-left: 3px solid #001f3f;
      color: #001f3f;
    }
    pre {
      white-space: pre-wrap;
      font-family: 'Courier New', monospace;
      background: #e8eef4;
      padding: 0.5em;
      margin: 1em 0;
      border-left: 3px solid #001f3f;
      color: #001f3f;
    }
    ol.references {
      list-style-type: decimal;
      padding-left: 1.5em;
    }
    footer {
      text-align: center;
      font-size: 0.9em;
      color: #666;
      margin-top: 2em;
      border-top: 1px solid #ddd;
      padding-top: 1em;
    }
  </style>
</head>
<body>

  <!-- Left‐side navigation pane (always visible) -->
  <nav class="toc">
    <ul>
      <li><a href="#introduction">1 Introduction</a></li>
      <li><a href="#electrochemical-operation">2 Electrochemical Operation</a></li>
      <li><a href="#prototyping-approach">3 Prototyping Approach</a></li>
      <li><a href="#project-timeline">4 Project Timeline</a></li>
      <li><a href="#preliminary-calculations">5 Preliminary Calculations</a></li>
      <li><a href="#purchasing-list">6 Purchasing List</a></li>
      <li><a href="#experimental-results">7 Experimental Results</a></li>
      <li><a href="#reference-documents">8 Reference Documents</a></li>
      <li><a href="#references">9 References</a></li>
    </ul>
  </nav>

  <!-- Main content area, centered -->
  <main>
    <div class="container">
      <header>
        <h1>CBE 3300B:<br>Direct Methanol Fuel Cell (DMFC)</h1>
        <p style="text-align:center; font-size:1.25em; color:#001f3f;">
          <strong>Methanol Dynamics &amp; Co. LLP (Max, Jack, Karam)</strong><br>
          Spring 2025<br>
          Chemical and Biomolecular Engineering<br>
          University of Pennsylvania
        </p>
    </header>



    <section id="introduction">
        <h2>1&nbsp;Introduction</h2>
        
        <p>
          This project explores the design and prototyping of a Direct Methanol Fuel Cell (DMFC) system using a 10-cell Flex-Stak from the Fuel Cell Store. The cell operates on a 3 % methanol solution (~1 M), and is designed to produce sufficient voltage and current to charge a 10,000 mAh battery pack within 24 hours.
        </p>
        <p>
          Our prototype integrates fluid dynamics (via peristaltic pumping), real-time monitoring (via Arduino and sensors), and electrical circuitry for power conditioning. We aim to validate theoretical predictions of fuel consumption, current density (~50 – 100 mA/cm²), and overall efficiency (~20 – 40 %).
        </p>
        <p>
          Key design constraints include minimizing methanol crossover, maximizing fuel cell power output, and designing dynamic circuitry for live readings and feedback.
        </p>
      
        <h3>Market Context</h3>
        <p>
          Fuel cell technology is poised for significant growth, with the global market expected to reach approximately <strong>$11 billion by 2029</strong>. Fuel cells are already used for:
        </p>
        <ul>
          <li>Stationary electricity production</li>
          <li>Vehicular powertrains</li>
          <li>Energy storage systems</li>
        </ul>
        <p>
          Methanol fuel cells, in particular, represent a less mature segment with strong potential due to liquid fuel ease and high energy density.
        </p>
      
        <h3>SWOT Analysis</h3>
        <ul>
          <li><strong>Strength:</strong> Higher volumetric energy density than hydrogen; competitive with gasoline in conversion efficiency.</li>
          <li><strong>Weakness:</strong> Toxicity and flammability concerns—methanol can cause health hazards if ingested and poses a fire risk.</li>
          <li><strong>Opportunity:</strong> Operates on dilute liquid feed, simplifying storage and enabling safer operation.</li>
          <li><strong>Threat:</strong> Competition from hydrogen fuel cells, which enjoy greater research focus and market adoption.</li>
        </ul>
      
        <h3>Competitor Analysis</h3>
        <ul>
          <li>DMFCs are popular in <em>portable power applications</em> and <em>defense</em> due to modularity, high power density, low noise, and minimal thermal signature.</li>
          <li>Key players in portable power: <strong>Blue World Technologies ApS</strong> (Denmark).</li>
          <li>Key players in defense: <strong>SFC Energy</strong> (Germany).</li>
        </ul>
      </section>
      

    <!-- 2. Electrochemical Operation -->
    <section id="electrochemical-operation">
      <h2>2&nbsp;Electrochemical Operation of a Direct Methanol Fuel Cell (DMFC)</h2>
      <p>The direct methanol fuel cell (DMFC) is an electrochemical device that converts the chemical energy of methanol into electrical energy through redox reactions. Unlike combustion, which releases energy primarily as heat, the DMFC harnesses this energy to drive electron flow, producing electricity in a controlled manner.</p>
    

      <!-- Centered membrane image -->
      <img src="membrane-image.png" alt="Proton Exchange Membrane" 
            style="display: block; margin: 1.5em auto; max-width: 80%;">

      <h3>&nbsp;Anode Reaction: Methanol Oxidation</h3>
      <p>At the anode, methanol (CH<sub>3</sub>OH) and water (H<sub>2</sub>O) undergo oxidation in the presence of a catalyst, typically platinum (Pt) or platinum–ruthenium (Pt–Ru). This reaction results in the formation of carbon dioxide (CO<sub>2</sub>), protons (H<sup>+</sup>), and electrons (e<sup>−</sup>):</p>
      <div class="equation">
        CH<sub>3</sub>OH + H<sub>2</sub>O → CO<sub>2</sub> + 6H<sup>+</sup> + 6e<sup>−</sup>
      </div>

      <h3>&nbsp;Proton Exchange and Electron Flow</h3>
      <p>Adjacent to the anode is a proton exchange membrane (PEM), often made of Nafion, which plays a crucial role in directing charge flow. This membrane allows the passage of protons (H<sup>+</sup>) from the anode to the cathode while preventing unwanted methanol crossover, a major source of efficiency loss in DMFCs. Meanwhile, the electrons generated at the anode travel through an external circuit, creating an electric current before reaching the cathode.</p>

      <h3>&nbsp;Cathode Reaction: Oxygen Reduction</h3>
      <p>At the cathode, oxygen gas (O<sub>2</sub>) is reduced in the presence of platinum or specialized catalysts such as RuSe, which help mitigate performance losses due to methanol crossover. The incoming oxygen reacts with protons from the membrane and electrons from the external circuit to form water:</p>
      <div class="equation">
        (3/2)O<sub>2</sub> + 6H<sup>+</sup> + 6e<sup>−</sup> → 3H<sub>2</sub>O
      </div>

      <h3>&nbsp;Theoretical Maximum Voltage &amp; Energy Efficiency</h3>
      <p>The ideal electromotive force (EMF) of a DMFC, derived from the Gibbs free energy change of the overall reaction:</p>
      <div class="equation">
        (3/2)O<sub>2</sub> + CH<sub>3</sub>OH → CO<sub>2</sub> + 2H<sub>2</sub>O
      </div>
      <p>is approximately 1.2&nbsp;V per cell. However, due to losses from activation polarization, ohmic resistance, and mass transport limitations, practical operating voltages typically range between 0.3&nbsp;V and 0.6&nbsp;V per cell. The Nernst equation accounts for real operating conditions:</p>
      <div class="equation">
        E = E<sub>0</sub> − (RT / nF) ln Q
      </div>
      <ul>
        <li>E<sub>0</sub> = 1.20 V</li>
        <li>R = 8.314 J/(mol·K)</li>
        <li>T = 298 K</li>
        <li>n = 6 (electrons)</li>
        <li>F = 96 485 C/mol</li>
        <li>Q = ([CO<sub>2</sub>][H<sub>2</sub>O]<sup>2</sup>)/([CH<sub>3</sub>OH][O<sub>2</sub>]<sup>3/2</sup>)</li>
      </ul>

      <h3>&nbsp;Summary of the DMFC Operation</h3>
      <ul>
        <li>Anode: Methanol and water oxidize, producing protons, electrons, and CO<sub>2</sub>.</li>
        <li>Proton Exchange Membrane: Conducts protons to cathode, blocks methanol crossover.</li>
        <li>Electron Flow: Electrons traverse an external circuit to generate power.</li>
        <li>Cathode: Oxygen is reduced with protons/electrons to form water.</li>
        <li>Voltage Output: Theoretical 1.2 V, practical 0.3–0.6 V due to losses.</li>
      </ul>
    </section>

      

    <!-- 3. Prototyping Approach -->
<section id="prototyping-approach">
    <h2>3&nbsp;Prototyping Approach</h2>
    <p>
      Our prototyping approach follows a staged methodology aimed at optimizing the design and achieving the highest possible voltage for our direct methanol fuel cell (DMFC).  
      The MVP goal is to develop a control device that precisely feeds methanol solution to the cell, monitors key parameters in real time, and is capable of charging an electronic device within a reasonable timeframe.
    </p>
  
    <h3>Minimum Viable Prototype (MVP)</h3>
    <ul>
      <li>
        <strong>Control &amp; Monitoring System:</strong>  
        Peristaltic pump + Arduino controller for precise MeOH delivery; sensors (flow, temperature, voltage, current) for real-time performance tracking; designed to charge a 10,000 mAh battery pack with time close to theoretical estimates (See 5. Preliminary Calculations).
      </li>
      <li>
        <strong>Passive Fuel Delivery (Alternative):</strong>  
        Relies on diffusion and natural convection—simple and low‐cost, but lacks precise dosing and data logging. We opted for active control to enable data‐driven optimization and reproducibility.
      </li>
      <li>
        <strong>Baseline Testing:</strong>  
        Establish voltage‐current curves under controlled conditions to benchmark performance.
      </li>
    </ul>
  
    <h3>Design Choices</h3>
  
    <h4>1. Active Control Implementation</h4>
    <ul>
      <li>Introduce sensors (flow meters, temperature, concentration) for dynamic reactant control.</li>
      <li>Use Arduino‐based control and a micropump for precise MeOH delivery.</li>
      <li>
        <em>Passive Strategy Comparison:</em>  
        Passive feed is often chosen for its simplicity and reliability, but it offers no fine control or live feedback—hence our choice of active control for precision and data acquisition.
      </li>
    </ul>
  
    <h4>2. Vapor vs. Liquid Feed Comparison</h4>
    <ul>
      <li>
        <strong>Vapor Feed Merits:</strong> Reduced methanol crossover and higher kinetics at elevated temperature.
      </li>
      <li>
        <strong>Vapor Feed Cons:</strong> Requires vaporizer, accurate concentration monitoring, and complex safety controls; a “simple” version (bubbling N₂ through MeOH) is difficult to implement and monitor reliably.
      </li>
      <li>
        <strong>Liquid Feed Merits:</strong> Direct metering with peristaltic pump, straightforward flow‐rate measurement, and robust implementation.
      </li>
      <li>
        <strong>Liquid Feed Cons:</strong> Higher crossover risk, mitigated by membrane choice and optimized flow rates.
      </li>
      <li><strong>Decision:</strong> Liquid feed selected for practicality, repeatability, and ease of monitoring.</li>
    </ul>
  
    <h4>3. Stack Orientation</h4>
    <ul>
      <li>Literature shows vertical stacking can improve gas diffusion and CO₂ removal.</li>
      <li>Manufacturer recommends horizontal orientation; we follow this guideline for our MVP to ensure proper sealing and simplify assembly.</li>
    </ul>
  
    <h4>4. Final Voltage Benchmark and System Refinement</h4>
    <ul>
      <li>Target 5 V via serial/parallel stacking of cells.</li>
      <li>Fine‐tune MeOH concentration, flow rates, and operating temperature to maximize power density and efficiency.</li>
    </ul>
  </section>
  

    <!-- 4. Project Timeline & Tracking Progress -->
<section id="project-timeline">
    <h2>4&nbsp;Project Timeline &amp; Tracking Progress</h2>
  
    <!-- 4.1 Gantt Chart Embed -->
    <h3>&nbsp;Gantt Chart</h3>
    <iframe
      src="https://docs.google.com/spreadsheets/d/18CdpdSgIVANfqoVWxQVcNEOPbPJYtTVe/htmlembed?gid=1576941100"
      style="width:100%; height:400px; border:1px solid #ccc;"
      frameborder="0"
      scrolling="no">
    </iframe>
    <p>
      <a href="https://docs.google.com/spreadsheets/d/18CdpdSgIVANfqoVWxQVcNEOPbPJYtTVe/edit?gid=1576941100"
         target="_blank" rel="noopener">
        View Full Gantt Chart
      </a>
    </p>
  
    <!-- 4.2 Weekly Breakdown -->
    <h3>&nbsp;Weekly Breakdown</h3>
    <ul>
      <li><strong>Week of Feb 24:</strong> Ordered 10-cell stack, drafted Gantt chart, and outlined project scope.</li>
      <li><strong>Week of Mar 3:</strong> Designed control circuitry and peristaltic pump schedule; created pump calibration curve.</li>
      <li><strong>Week of Mar 10:</strong> Spring break (no active lab work).</li>
      <li><strong>Week of Mar 17:</strong> Integrated pump and circuit, set up plumbing, and performed initial flow‐rate tests.</li>
      <li><strong>Week of Mar 24:</strong> Fixed methanol plumbing, reran pump calibrations, prepared 3% MeOH feed, and verified pump performance.</li>
      <li><strong>Week of Mar 31:</strong> Ran DI-water then 3% MeOH tests; collected current–voltage data and diagnosed performance.</li>
      <li><strong>Week of Apr 7:</strong> Soldered permanent circuit board; adapted temperature-sensor script to plot fuel cell voltage.</li>
      <li><strong>Week of Apr 14:</strong> Finalized sensor-processing code and feedback loop; updated progress log for reproducibility.</li>
    </ul>
  
    <!-- 4.3 Progress Log Preview & Download -->
    <h3>&nbsp;Progress Log</h3>
    <p>
      A concise record of our weekly milestones and deliverables is below.  
      <a href="CBE_3300b_Progress_log (2).pdf" target="_blank" rel="noopener">View the full progress log (PDF)</a>.
    </p>
    <embed
      src="CBE_3300b_Progress_log (2).pdf"
      type="application/pdf"
      width="100%"
      height="500px"
      style="border:1px solid #ccc;" />
  </section>


    <!-- 5. Preliminary Calculations -->
    <section id="preliminary-calculations">
      <h2>5&nbsp;Preliminary Calculations</h2>
      <p>Accurate theoretical calculations are essential for predicting DMFC performance and optimizing efficiency.</p>

      <h3>&nbsp;Nernst Equation Calculations</h3>
      <div class="equation">
        E = E<sub>0</sub> − (RT / nF) ln Q
      </div>
      <ul>
        <li>E<sub>0</sub> = 1.20 V</li>
        <li>R = 8.314 J/(mol·K)</li>
        <li>T = 298 K</li>
        <li>n = 6 electrons</li>
        <li>F = 96 485 C/mol</li>
        <li>Q = ([CO<sub>2</sub>][H<sub>2</sub>O]<sup>2</sup>)/([CH<sub>3</sub>OH][O<sub>2</sub>]<sup>3/2</sup>)</li>
      </ul>

      <h3>&nbsp;Theoretical Maximum Voltage</h3>
      <p>The standard theoretical maximum voltage of a DMFC is E<sub>0</sub> = 1.20 V.</p>

      <h3>&nbsp;Estimated Efficiency and Target Voltage</h3>
      <ul>
        <li>Assumed efficiency: 40 %</li>
        <li>Operational voltage range: 0.3–0.6 V per cell</li>
        <li>System voltage goal: 4–6 V (5 V target) via stacking</li>
      </ul>

      <h3>&nbsp;System Parameters</h3>
      <ul>
        <li><strong>Fuel Cell Stack:</strong> 10 cells in series</li>
        <li><strong>Active Area per Cell:</strong> 10&nbsp;cm²</li>
        <li><strong>Estimated Current Density:</strong> 50–100&nbsp;mA/cm²</li>
        <li><strong>Total Current Output:</strong> 5&nbsp;A (at 50&nbsp;mA/cm²)</li>
        <li><strong>Expected Voltage Output:</strong> 3.8&nbsp;V under load, 4.3&nbsp;V open circuit</li>
        <li><strong>Expected Power Output:</strong> 19&nbsp;W at 50&nbsp;mA/cm², up to 32&nbsp;W at 100&nbsp;mA/cm²</li>
      </ul>

      <h3>&nbsp;Methanol Consumption Estimate</h3>
      <ul>
        <li><strong>Feed Concentration:</strong> 3% methanol by mass (approx. 1 M)</li>
        <li><strong>Feed Rate:</strong> 100 cc/min = 6 L/hr</li>
        <li><strong>Specific Gravity of Methanol:</strong> 0.792 g/mL</li>
        <li><strong>Estimated Methanol Content:</strong> ~143 g/hr</li>
        <li><strong>Energy Density of Methanol:</strong> 6 kWh/kg</li>
        <li><strong>Effective Power (20% conversion efficiency):</strong></li>
      </ul>
      <div class="equation">
        P = 143 g/hr × (6 kWh / 1000 g) × 0.20 = 0.17 kWh/hr = 170 W
      </div>

      <h3>&nbsp;Discrepancy: Theoretical vs. Experimental Power</h3>
      <ul>
        <li>Power from current density &amp; area: 19–32 W</li>
        <li>Power from fuel energy &amp; conversion efficiency: 170 W</li>
        <li><strong>Conclusion:</strong> Nearly an order-of-magnitude gap. Causes may include overestimated efficiency or underestimated current output. Further validation required.</li>
      </ul>

      <h3>&nbsp;Charge Time Estimation</h3>
      <p><strong>Battery Target:</strong> 10,000 mAh at 4 V = 80 Wh</p>
      <p><strong>Assuming Ideal Output:</strong></p>
      <div class="equation">
        t = 80 Wh ÷ 19 W ≈ 4.2 hours
      </div>
      <ul>
        <li><strong>Optimistic Scenario:</strong> ~3 hours (with higher current/power)</li>
        <li><strong>Conservative Benchmark:</strong> ≤24 hours still acceptable</li>
      </ul>

      <h3>&nbsp;Crossover &amp; Efficiency Considerations</h3>
      <ul>
        <li>Pure methanol increases crossover → cathode poisoning &amp; fuel waste.</li>
        <li>Voltage decay up to 30% within first few hours due to crossover.</li>
        <li><strong>Strategy:</strong> Begin with 1 M feed, then incrementally raise concentration while monitoring crossover and power output.</li>
      </ul>
    </section>

    


    <!-- 6. Purchasing List -->
<section id="purchasing-list">
    <h2>6&nbsp;Purchasing List</h2>
    <p>We sourced each component below to assemble, control, and test our DMFC prototype. Descriptions indicate each item's role in the system.</p>
    <ul>
      <li>
        <strong>10-Cell Fuel Cell Stack</strong> from the Fuel Cell Store  
        &mdash; central power-generating unit; cells are stacked serially to reach our 5 V target.
      </li>
      <li>
        <strong>Arduino Microcontroller &amp; Circuit Board</strong>  
        &mdash; runs pump control scripts, logs voltage/current data, and interfaces with all sensors.
      </li>
      <li>
        <strong>47 kΩ Resistors (×4)</strong>  
        &mdash; used in voltage divider networks to safely step down the fuel cell stack voltage for Arduino analog inputs.
      </li>
      <li>
        <strong>1 kΩ Resistor (×1)</strong>  
        &mdash; employed for current sensing and stabilizing sensor output signals.
      </li>
      <li>
        <strong>Peristaltic Pumps (3 × 5 mm tubing)</strong>  
        &mdash; two pumps for accurate methanol solution delivery; provide adjustable flow rates without fluid contact.
      </li>
      <li>
        <strong>On/Off Toggle Switches (×2)</strong>  
        &mdash; manual power cutoffs for the pumps and control electronics to enhance safety.
      </li>
      <li>
        <strong>Methanol-Compatible Tubing</strong> (Tygon 2375, 1 mm ID × 3 mm OD, 1 m)  
        &mdash; chemically resistant conduit linking pumps to the fuel cell inlet.
      </li>
      <li>
        <strong>MOSFET Transistor</strong>  
        &mdash; acts as an electronic switch under Arduino PWM control to drive the pump motors at required current levels.
      </li>
      <li>
        <strong>Diode</strong>  
        &mdash; protects the control circuitry from back‐EMF generated by the pumps and stack.
      </li>
      <li>
        <strong>Hook-up Wires</strong>  
        &mdash; assorted gauge wires.
      </li>
      <li>
        <strong>3D Printing Filament (PLA)</strong>  
        &mdash; used to fabricate custom pump mounts and protective housings.
      </li>
    </ul>
  </section>




<!-- 7. Experimental Results -->
<section id="experimental-results">
    <h2>7&nbsp;Experimental Setup and Results</h2>
    

  
    <!-- 7.1 Software Setup -->
    <h3>&nbsp;Software Setup</h3>
    <p>
      Our control system runs two coordinated programs: an Arduino sketch on the microcontroller and a Processing sketch on the PC.  
      The Arduino handles real‐time sensor readings and pump PWM, while Processing logs data, visualizes performance, and sends updated control commands back to the Arduino.
    </p>
    <p>
      View the code here:  
      <a href="04-25-trial-arduino.txt" target="_blank">Arduino Sketch</a> |  
      <a href="DMFCCodeWorkingFeedback.pde" target="_blank">Processing Sketch</a>
    </p>
  
    <h4>Bidirectional Communication</h4>
    <p>
      <strong>Arduino → Processing:</strong> Sends voltage readings via <code>Serial.println(voltage)</code><br>
      <strong>Processing → Arduino:</strong> Sends commands like <code>SET:&lt;value&gt;</code> to adjust the pump duty cycle.
    </p>
    <img src="imageimage.jpg" alt="Arduino–Processing Feedback Loop Diagram"
         style="display:block; margin:1em auto; max-width:75%;" />
  
    <h4>Arduino Sketch Overview</h4>
    <p>
      The Arduino code initializes serial communication and I/O pins, then continuously:
      reads the fuel cell voltage sensor, converts that reading to actual voltage, transmits it to Processing, and generates the PWM waveform for the pump.  
      It also listens for “SET:” commands from Processing to update the duty cycle for closed‐loop control.
    </p>
    <pre>
  // Pseudocode:
  // 1. Initialize Serial at 9600 baud.
  // 2. Configure pwmPin (pump drive) and analogPin (fuel-cell voltage).
  // 3. Set default dutyCycle, pwmPeriod, and targetCellVoltage.
  // 4. In loop():
  //      a. Read analogPin → raw sensorValue.
  //      b. Convert sensorValue → actual voltage.
  //      c. Serial.println(voltage) → send to Processing.
  //      d. Generate PWM on pwmPin:
  //           HIGH for onTime = pwmPeriod × dutyCycle
  //           LOW for offTime = pwmPeriod – onTime
  //      e. If Serial.available():
  //           • Read line until '\n'
  //           • If line starts with "SET:",
  //               parse new dutyCycle = constrain(value, 0 → 1)
  //      f. (Optional) Every second, adjust dutyCycle up/down
  //         to approach targetCellVoltage.
    </pre>
  
    <h4>Processing Sketch Overview</h4>
    <p>
      The Processing application opens the serial port, prepares a live plot and CSV log, and displays a simple UI.  
      On each incoming voltage reading, it updates the graph and file, computes any error from the target, and sends a “SET:” command back to the Arduino to tweak the pump PWM.
    </p>
    <pre>
  // Pseudocode:
  // 1. Import processing.serial.* and create data lists.
  // 2. setup():
  //      • size(900,600), open first serial port at 9600 baud.
  //      • create CSV writer "voltage_log_TIMESTAMP.csv".
  //      • initialize UI: Pause button, input field, Send button.
  // 3. draw():
  //      • clear background, draw axes.
  //      • plot voltageData vs. timeData in real time.
  //      • draw UI elements and display statistics.
  // 4. serialEvent():
  //      • Read incoming line until '\n'.
  //      • Parse voltage → float.
  //      • Append to voltageData & timeData.
  //      • Write "time,voltage" to CSV.
  //      • Call feedbackControl().
  // 5. feedbackControl():
  //      • If interval elapsed and ≥2 data points:
  //           - Compute deltaV and voltageError.
  //           - Adjust dutyCycle by small increment.
  //           - myPort.write("SET:" + dutyCycle + "\n").
  // 6. Button handlers:
  //      • Pause/resume data collection.
  //      • Read user input for target charge time (days),
  //        compute estimate, and display.
    </pre>
    
  
  <!-- 7.2 Hardware Setup -->
<h3>&nbsp;Hardware Setup</h3>
<p>
  Our hardware setup integrates the DMFC stack, peristaltic pump, control electronics, and tubing into a single, portable enclosure.  
  The computer communicates with the Arduino via USB, while the Arduino drives the pump and reads sensors. Below is our assembly diagram and connection overview:
</p>
<img src="updatedcircuitdiagram.jpg" alt="Circuit Diagram" 
     style="display:block; margin:1em auto; max-width:75%;" />

<ul>
  <li>
    <strong>Fuel Cell Stack:</strong>  
    The 10-cell Flex-Stak is mounted on the front panel. Two bulkhead fittings carry the inlet tubing (from the MeOH feed) and the outlet tubing (to waste).
  </li>
  <li>
    <strong>Peristaltic Pump:</strong>  
    Secured to the top of the enclosure, it draws 3 wt% methanol from the feed reservoir through Tygon 2375 (1 mm ID, 3 mm OD) tubing and delivers it to the fuel cell inlet.
  </li>
  <li>
    <strong>Arduino &amp; Sensor Electronics:</strong>  
    Housed inside the box, the Arduino reads the stack voltage via an analog pin (through a resistor divider) and controls the pump motor via a MOSFET driver.
  </li>
  <li>
    <strong>MOSFET Driver &amp; Flyback Diode:</strong>  
    The MOSFET switches the 18 V battery supply to the pump under PWM control. A diode across the pump motor terminals suppresses back-EMF spikes.
  </li>
  <li>
    <strong>Battery Pack &amp; Power Switch:</strong>  
    An 18 V battery pack powers both pump and stack. A front-panel toggle switch isolates power for safe startup and shutdown.
  </li>
  <li>
    <strong>USB Serial Connection:</strong>  
    A USB cable links the Arduino to the PC for real-time data logging and control commands at 9600 baud.
  </li>
  <li>
    <strong>Enclosure Housing:</strong>  
    A custom-designed CAD box holds all components, with cutouts for tubing, connectors, ventilation, and user interface.
  </li>
</ul>

<p style="text-align:center;">
  <a href="FuelCellCircuitHousing v1.3mf" download
     style="display:inline-block; background:#001f3f; color:#fff; padding:0.5em 1em; border-radius:4px; text-decoration:none;">
    Download CAD Enclosure (v1.3)
  </a>
</p>

    
  
  <!-- 7.1 Pump Calibration -->
    <h3>&nbsp;Pump Calibration</h3>
    <p>
      To characterize our peristaltic pump, we measured flow rate (Q) as a function of applied voltage (V<sub>app</sub>) using DI water. The resulting data were fit to a linear model:
    </p>
    <div class="equation">
      Q = 6.1 × V<sub>app</sub> − 9.9 (mL/min)
    </div>
    <p>
      Since the pump is powered by an 18 V battery, we adjust the PWM duty cycle (D) so that V<sub>app</sub> = 18 V × D.  
      To achieve a target flow Q*, we calculate:
    </p>
    <div class="equation">
      D = (Q* + 9.9) / (6.1 × 18)
    </div>
    <p>
      The calibration plot below shows measured points and the linear fit, enabling precise control of methanol feed rates.
    </p>
    <img src="calibration curve.png" alt="Pump Calibration Curve"
         style="display:block; margin:1em auto; max-width:75%;" />
  
    <!-- 7.2 Fuel Cell Performance -->
    <h3>&nbsp;Fuel Cell Performance (I–V Curve)</h3>
    </p>
    <img src="IV-plots.png" alt="Current–Voltage (I–V) Curve"
         style="display:block; margin:1em auto; max-width:50%;" />
  <p>
      We performed polarization tests on the 10-cell DMFC stack with a 3 wt% methanol feed.  
      The current–voltage curve above reveals peak currents approximately two orders of magnitude below our theoretical estimates.  
      To diagnose this discrepancy, we carried out the following steps:

    <ol>
        <li>
          <strong>Hydration Flush:</strong> We flushed the cell with deionized (DI) water for 30 minutes to fully hydrate the Nafion membrane and gas diffusion layers (GDLs).  
          This cleaning step removed residual methanol and contaminants and raised the open-circuit voltage from 1.9 V to 4.4 V.
        </li>
        <li>
          <strong>Concentration Ramp-Up:</strong> We incrementally increased methanol concentration from 0.5 wt% to 3 wt% in 0.5 wt% steps, allowing 10 minutes of equilibration at each stage.  
          This prevented flooding and catalyst poisoning; we observed a steady increase in current density with each step up to 3 wt%, which is the manufacturer's spec.
        </li>
        <li>
          <strong>Effluent Density Analysis:</strong> We collected reactor effluent after testing and measured its density.  
          Our initial calculations showed 10 wt% MeOH, which is nonsensical. After repeating, effluent density corresponded to ~1.4 wt% methanol consumption, confirming active fuel utilization.
        </li>
        <li>
          <strong>Oxygen-Feed:</strong> We directed airflow using a square portable fan over the cell stack to maintain fresh O₂ supply.  
          Instead of boosting performance, we saw a ~0.2 V drop under load, indicating the stack cooled below its optimal 50–60 °C range, underscoring the need for thermal regulation.
        </li>
        <li>
          <strong>Crossover Stress Test:</strong> We tested methanol concentrations above the recommended 3 wt% and fed 10%wt.  
          The trial produced an initial voltage spike followed by a rapid decline within a few minutes, characteristic of methanol crossover causing cathode poisoning and efficiency loss.
        </li>
      </ol>

  
  
    <!-- 7.3 Feedback Loop Placeholder -->
    <h3>&nbsp;Feedback Loop &amp; Control Iteration</h3>
    <p>
      We are developing a closed‐loop control algorithm that uses real‐time sensor data (flow rate, voltage, temperature)  
      to adjust pump PWM and maintain optimal cell performance.  
      <em>Detailed control algorithm and Arduino script to follow in future updates.</em>
    </p>
  </section>




  


    <!-- 8. Reference Documents -->
      <section id="reference-documents">
        <h2>8&nbsp;Reference Documents</h2>
        <p>
          To support the design, prototyping, and safety considerations for our DMFC system, we draw on four key documents.  
          The <strong>Preliminary Report</strong> lays out the background, electrochemical principles, and step-by-step prototyping approach (referenced in Sections 1–3).  
          The <strong>Methanol SDS</strong> and <strong>Hydrogen SDS</strong> provide critical safety, handling, and storage information for our fuels (used to inform Section 6).  
          Finally, the <strong>Charge time estimate</strong> contains all of our power-and-fuel calculations—linking chemical energy to electrical output and efficiency predictions (detailed in Section 5).
        </p>
        <ul>
          <li><strong>Preliminary Report:</strong> <a href="DMFC_Prelim_Report_ Final_FinalFR.pdf" target="_blank">View PDF</a></li>
          <li><strong>Methanol SDS:</strong> <a href="methanol-sds.pdf" target="_blank">Safety Sheet</a></li>
          <li><strong>Hydrogen SDS:</strong> <a href="hydrogendatasheet.pdf" target="_blank">Safety Sheet</a></li>
          <li><strong>Charge Time Estimate:</strong> <a href="CBE_3300_Power_estimates.pdf" target="_blank">Energy Calculations</a></li>
        </ul>
      </section>
  
  
      <!-- 9. References -->
      <section id="references">
        <h2>9&nbsp;References</h2>
        <ol class="references">
          <li>
            Direct Methanol Fuel Cells – Nernst Equation and Performance Analysis.  
            <a href="https://www.sciencedirect.com/topics/chemistry/direct-methanol-fuel-cell" target="_blank" rel="noopener">
              https://www.sciencedirect.com/topics/chemistry/direct-methanol-fuel-cell
            </a>
          </li>
          <li>
            DMFC Efficiency Study: “The potential efficiency (ε<sub>f</sub>) of a DMFC for an operational cell e.m.f. (E) of 0.5 V is about 40%.”  
            <a href="https://www.sciencedirect.com/topics/chemistry/direct-methanol-fuel-cell" target="_blank" rel="noopener">
              https://www.sciencedirect.com/topics/chemistry/direct-methanol-fuel-cell
            </a>
          </li>
          <li>
            Fuel Cell Store – Direct Methanol MEA.  
            <a href="https://www.fuelcellstore.com/direct-methanol-mea" target="_blank" rel="noopener">
              https://www.fuelcellstore.com/direct-methanol-mea
            </a>
          </li>
          <li>
            MSE Supplies – Gold-Plated Current Collectors.  
            <a href="https://www.msesupplies.com/products/pt-and-au-wire-0-6-mm-dia-10-mm-length-unit" target="_blank" rel="noopener">
              https://www.msesupplies.com/products/pt-and-au-wire-0-6-mm-dia-10-mm-length-unit
            </a>
          </li>
          <li>
            Methanol-Resistant Oxygen-Reduction Catalysts for DMFCs.  
            <a href="https://www.annualreviews.org/content/journals/10.1146/annurev.matsci.33.072302.093511" target="_blank" rel="noopener">
              https://www.annualreviews.org/content/journals/10.1146/annurev.matsci.33.072302.093511
            </a>
          </li>
          <li>
            Limiting Current Behavior of the DMFC.  
            <a href="https://www.sciencedirect.com/science/article/pii/S0013468699002856" target="_blank" rel="noopener">
              https://www.sciencedirect.com/science/article/pii/S0013468699002856
            </a>
          </li>
          <li>
            Performance of a Direct Methanol Fuel Cell.  
            <a href="https://link.springer.com/article/10.1023/A:1003263632683" target="_blank" rel="noopener">
              https://link.springer.com/article/10.1023/A:1003263632683
            </a>
          </li>
          <li>
            Basile &amp; Dalena (Eds.), <em>Methanol: Science and Engineering</em>. Chapter 14: Direct Methanol Fuel Cells. Elsevier, 2018.  
            <a href="https://www.amazon.com/Methanol-Science-Engineering-Angelo-Basile/dp/0444639039" target="_blank" rel="noopener">
              https://www.amazon.com/Methanol-Science-Engineering-Angelo-Basile/dp/0444639039
            </a>
          </li>
          <li>
            Direct methanol fuel cells system – A review of dual-role electrocatalysts for oxygen reduction and methanol oxidation.  
            <a href="https://www.sciencedirect.com/science/article/pii/S258891332500002X" target="_blank" rel="noopener">
              https://www.sciencedirect.com/science/article/pii/S258891332500002X
            </a>
          </li>
          <li>
            Vapor-feed direct methanol fuel cells using pure methanol.  
            <a href="https://www.sciencedirect.com/science/article/pii/S2590174524002241" target="_blank" rel="noopener">
              https://www.sciencedirect.com/science/article/pii/S2590174524002241
            </a>
          </li>
          <li>
            Direct methanol fuel cells parameter identification with enhanced performance.  
            <a href="https://www.sciencedirect.com/science/article/pii/S2590174525001515" target="_blank" rel="noopener">
              https://www.sciencedirect.com/science/article/pii/S2590174525001515
            </a>
          </li>
          <li>
            Machine learning-guided design of direct methanol fuel cells with advanced catalysts.  
            <a href="https://www.sciencedirect.com/science/article/pii/S0378775324017105" target="_blank" rel="noopener">
              https://www.sciencedirect.com/science/article/pii/S0378775324017105
            </a>
          </li>
        </ol>
      </section>

  
      <footer>
        &copy; 2025 Methanol Dynamics &amp; Co. LLP
      </footer>
    </div>
  
  </body>
  </html>
